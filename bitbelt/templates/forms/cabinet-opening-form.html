{% extends "forms/base-form.html" %}

{% block styles %}
{{ super() }}
{% endblock styles %}

{% block body %}
    {% include 'flashed-messages.html' %}
    <div id="cabinet-opening" class="horizontal-container">
        <form method="POST">
            <div class="vertical-container__right-justified">
                {{ form.hidden_tag() }}
                {{ form.csrf_token }}
                <span class="page-sub-header">Opening Specific Values</span>
                {{ render_field(form.number_of_openings, class="text-input") }} 
                {{ render_field(form.number_of_doors, class="text-input", data_bind="text: numberOfDoors()") }} 
                {{ render_field(form.number_of_panels_per_door, class="text-input") }} 
                {{ render_field(form.opening_width, class="text-input") }} 
                {{ render_field(form.opening_height, class="text-input") }} 
                {{ render_field(form.middle_gap, class="text-input") }} 

                <input class="btn-action" type="submit" value="Submit Opening"/>

                <span class="page-sub-header">Default Values</span>
                {{ render_field(form.left_stile_width, class="text-input") }}
                {{ render_field(form.right_stile_width, class="text-input") }}
                {{ render_field(form.top_rail_width, class="text-input") }}
                {{ render_field(form.bottom_rail_width, class="text-input") }}
                {{ render_field(form.left_overlay, class="text-input") }}
                {{ render_field(form.right_overlay, class="text-input") }}
                {{ render_field(form.top_overlay, class="text-input") }}
                {{ render_field(form.bottom_overlay, class="text-input") }}
                {{ render_field(form.panel_gap, class="text-input") }}
                {{ render_field(form.tennon_length, class="text-input") }} 
                {{ render_field(form.center_rail_width, class="text-input") }} 
            </div>
            <input class="btn-action" type="submit" value="Submit Opening"/>
            {% if cabinet_opening is not none %}
            <input class="btn-secondary" type="button" value="Remove Opening" data-bind="click: deleteCabinetOpening"/>
            {% endif %}
        </form>
        <div class="vertical-container align-self-flex-start">
            <span class="page-sub-header">Door Details</span>
            <div class="vertical-container__right-aligned">
                <span data-bind="text: 'Door: ' + calculateDoorWidth() + ' x ' + calculateDoorHeight() + ' (' + totalNumberOfDoors() + ')'"></span>
                <span data-bind="text: 'Panel: ' + calculatePanelWidth() + ' x ' + calculatePanelHeight() + ' (' + totalNumberOfPanels() + ')'"></span>
                <span data-bind="text: 'Top Rail: ' + topRailWidth() + ' x ' + calculateRailLength() + ' (' + totalNumberOfTopRails() + ')'"></span>
                <span data-bind="text: 'Bottom Rail: ' + bottomRailWidth() + ' x ' + calculateRailLength() + ' (' + totalNumberOfBottomRails() + ')'"></span>
                <span data-bind="text: 'Left Stile: ' + leftStileWidth() + ' x ' + calculateStileLength() + ' (' + totalNumberOfLeftStiles() + ')'"></span>
                <span data-bind="text: 'Right Stile: ' + rightStileWidth() + ' x ' + calculateStileLength() + ' (' + totalNumberOfRightStiles() + ')'"></span>
                <span data-bind="text: 'Center Rail: ' + centerRailWidth() + ' x ' + calculateCenterRailLength() + ' (' + totalNumberOfCenterRails() + ')'"></span>
            </div>
        </div>
    </div>
{% endblock body %}

{% block scripts %}
<script>
    var cabinetOpeningFromServer = {{cabinet_opening|tojson}};
</script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/cabinet-opening.bundle.js') }}"></script>
{% endblock scripts %}